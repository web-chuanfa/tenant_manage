webpackJsonp([2],{"0DPD":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("mvHQ"),o=n.n(a),l=n("fZjL"),r=n.n(l),s={name:"user",data:function(){return{input:"",currentPage:1,pageSize:10,currentTotal:0,search:"",tableData:[],multipleSelection:[],addUserDialog:!1,userInsDg2:!1,userInsDg:!1,form:{name:"",region:"",role:"",date1:"",date2:"",delivery:!1,type:[],resource:"username",desc:""},active1:"",active2:"none",formLabelWidth:"120px",userAuthor:[],checkOne:[1,2],id:"10001111"}},computed:{tables:function(){var e=this.search;return e?this.tableData.filter(function(t){return r()(t).some(function(n){if("name"==n||"email"==n)return String(t[n]).toLowerCase().indexOf(e)>-1})}):this.tableData}},created:function(){var e=this;console.log(this.global),this.$service.home.user.getListInfo().then(function(t){e.tableData=t.tableData}),this.$service.home.user.getUserAuthor().then(function(t){e.userAuthor=JSON.parse(o()(t.userAuthor))})},methods:{getKey:function(e){console.log(e),console.log(this.checkOne)},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e)},changeStatus:function(){"username"===this.form.resource?(this.active1="",this.active2="none"):"iphone"===this.form.resource?(this.active1="none",this.active2=""):(this.active1="none",this.active2="none")},onSubmit:function(){console.log("submit!")},handleSelectionChange:function(e){this.multipleSelection=e},handleDelete:function(e,t){var n=this;this.$confirm("删除将导致该用户的所有实例被取消授权，确定删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.$message({type:"success",message:"删除成功!"})}).catch(function(){n.$message({type:"info",message:"已取消删除"})}),console.log(e,t)},handleOperate:function(e,t){this.userInsDg2=!0,console.log(e,t)},handleAdd:function(e,t){this.addUserDialog=!0,this.userInsDg=!0,console.log(e,t)},userInsConfirm:function(){this.addUserDialog=!1,this.userInsDg=!1},userInsCancel:function(){this.addUserDialog=!0,this.userInsDg=!1}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"overview-container"},[n("div",{staticClass:"filter-container"},[n("el-row",[n("el-col",{attrs:{span:16}},[n("el-button",{staticStyle:{"background-color":"#009ddb","border-color":"#009ddb"},attrs:{type:"primary"},on:{click:function(t){e.addUserDialog=!0}}},[e._v("添加用户")])],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-input",{attrs:{placeholder:"请输入手机号或用户名搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1),e._v(" "),n("div",{staticClass:"tenant-serve-list"},[n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tables.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{label:"用户"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.username))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"created",label:"录入用户","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{prop:"email",label:"邮箱","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{prop:"updateDate",label:"更新时间","show-overflow-tooltip":""}}),e._v(" "),n("el-table-column",{attrs:{width:"250",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){e.handleOperate(t.$index,t.row)}}},[e._v("角色")]),e._v(" "),4==e.global.length?n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.handleDelete(t.$index,t.row)}}},[e._v("删除")]):e._e()]}}])})],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"添加用户",visible:e.addUserDialog,width:"40%"},on:{"update:visible":function(t){e.addUserDialog=t}}},[n("el-form",{attrs:{model:e.form}},[n("el-form-item",[n("el-radio-group",{on:{change:e.changeStatus},model:{value:e.form.resource,callback:function(t){e.$set(e.form,"resource",t)},expression:"form.resource"}},[n("el-radio",{attrs:{label:"username"}},[e._v("按姓名")]),e._v(" "),n("el-radio",{attrs:{label:"iphone"}},[e._v("按手机或邮箱")])],1)],1),e._v(" "),n("el-form-item",[n("el-col",{attrs:{span:14}},[n("el-input",{style:{display:e.active1},attrs:{placeholder:"请按姓名添加用户"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}}),e._v(" "),n("el-input",{style:{display:e.active2},attrs:{placeholder:"请按手机或邮箱添加用户"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}})],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1),e._v(" "),n("el-form-item",[n("el-table",{attrs:{data:e.tableData}},[n("el-table-column",{attrs:{property:"username",label:"用户名"}}),e._v(" "),n("el-table-column",{attrs:{property:"name",label:"姓名"}}),e._v(" "),n("el-table-column",{attrs:{property:"iphone",label:"手机号"}}),e._v(" "),n("el-table-column",{attrs:{property:"email",label:"邮箱"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){e.handleAdd(t.$index,t.row)}}},[e._v("添加")])]}}])})],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.addUserDialog=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addUserDialog=!1}}},[e._v("确 定")])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"授权用户",visible:e.userInsDg},on:{"update:visible":function(t){e.userInsDg=t}}},[n("div",{staticClass:"content",staticStyle:{"min-height":"200px"}},[n("el-tree",{attrs:{data:e.userAuthor.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),"node-key":"id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,o=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",{staticStyle:{"margin-right":"50px"}},[e._v(e._s(a.label))]),e._v(" "),n("el-checkbox-group",{staticClass:"checkGroup",model:{value:e.checkOne,callback:function(t){e.checkOne=t},expression:"checkOne"}},e._l(o.roleList,function(t){return n("el-checkbox",{key:t.tenantId,attrs:{label:t.tenantId},on:{change:function(){return e.getKey(t)}}},[e._v(e._s(t.roleName))])}))],1)}}])})],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.userInsCancel}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.userInsConfirm}},[e._v("确 定")])],1)]),e._v(" "),n("el-dialog",{attrs:{title:"授权用户",visible:e.userInsDg2,width:"35%"},on:{"update:visible":function(t){e.userInsDg2=t}}},[n("div",{staticClass:"content",staticStyle:{"min-height":"200px"}},[n("el-tree",{attrs:{data:e.userAuthor,"node-key":"id","default-expand-all":"","expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,o=t.data;return n("span",{staticClass:"custom-tree-node"},[n("span",{staticStyle:{"margin-right":"50px"}},[e._v(e._s(a.label))]),e._v(" "),n("el-checkbox-group",{staticClass:"checkGroup",model:{value:e.checkOne,callback:function(t){e.checkOne=t},expression:"checkOne"}},e._l(o.roleList,function(t){return n("el-checkbox",{key:t.tenantId,attrs:{label:t.tenantId},on:{change:function(){return e.getKey(t.tenantId)}}},[e._v(e._s(t.roleName))])}))],1)}}])})],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.userInsDg2=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.userInsDg2=!1}}},[e._v("确 定")])],1)]),e._v(" "),n("div",{staticClass:"block marginTop15"},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":10,background:"",align:"right",layout:"total, sizes, prev, pager, next, jumper",total:40},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var c=n("VU/8")(s,i,!1,function(e){n("O0DY")},"data-v-399ceadd",null);t.default=c.exports},Cdx3:function(e,t,n){var a=n("sB3e"),o=n("lktj");n("uqUo")("keys",function(){return function(e){return o(a(e))}})},O0DY:function(e,t){},fZjL:function(e,t,n){e.exports={default:n("jFbC"),__esModule:!0}},jFbC:function(e,t,n){n("Cdx3"),e.exports=n("FeBl").Object.keys},mvHQ:function(e,t,n){e.exports={default:n("qkKv"),__esModule:!0}},qkKv:function(e,t,n){var a=n("FeBl"),o=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},uqUo:function(e,t,n){var a=n("kM2E"),o=n("FeBl"),l=n("S82l");e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],r={};r[e]=t(n),a(a.S+a.F*l(function(){n(1)}),"Object",r)}}});
//# sourceMappingURL=2.bfb8a52807502063ea8e.js.map